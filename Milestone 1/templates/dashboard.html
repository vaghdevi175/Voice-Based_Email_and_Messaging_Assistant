<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dashboard | Voice Assistant</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ICONS -->
<link rel="stylesheet"
 href="https://cdn-uicons.flaticon.com/2.4.2/uicons-regular-rounded/css/uicons-regular-rounded.css">
<link rel="stylesheet"
 href="https://cdn-uicons.flaticon.com/2.4.2/uicons-brands/css/uicons-brands.css">
<script>window.CURRENT_PAGE = "dashboard";</script>


<style>
/* ================= BASE ================= */
body{
  margin:0;
  font-family: Inter, system-ui, sans-serif;
  background: linear-gradient(135deg,#0b1220,#1f3b57,#7fa6c9);
  min-height:100vh;
  padding:60px 80px;
  color:white;
}

/* ================= TOP BAR ================= */
.top-bar{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.header h1{
  margin:0;
  font-size:28px;
}

.header p{
  margin-top:6px;
  color:#cbd5e1;
}

/* ================= USER MENU ================= */
.user-menu{
  position:relative;
}

.avatar-btn{
  width:46px;
  height:46px;
  border-radius:50%;
  border:none;
  background:rgba(255,255,255,0.95);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  cursor:pointer;
  box-shadow:0 8px 22px rgba(0,0,0,.25);
  transition:transform .2s ease;
}

.avatar-btn:hover{
  transform:scale(1.06);
}

/* Dropdown */
.user-dropdown{
  position:absolute;
  right:0;
  top:58px;
  width:240px;
  background:#ffffff;
  border-radius:16px;
  box-shadow:0 24px 50px rgba(0,0,0,.28);
  opacity:0;
  transform:translateY(-8px) scale(.96);
  pointer-events:none;
  transition:.25s ease;
}

.user-dropdown.show{
  opacity:1;
  transform:translateY(0) scale(1);
  pointer-events:auto;
}

/* Email */
.user-email{
  padding:16px;
  font-size:13px;
  color:#334155;
  border-bottom:1px solid #e5e7eb;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Logout */
.logout-btn{
  display:flex;
  align-items:center;
  gap:10px;
  padding:16px;
  font-weight:600;
  color:#ef4444;
  text-decoration:none;
}

.logout-btn:hover{
  background:#fef2f2;
}

/* ================= GRID ================= */
.grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:28px;
  margin-top:55px;
}

/* ================= CARD ================= */
.card{
  background:#f8fafc;
  border-radius:20px;
  padding:36px 28px;
  border:1px solid #e5e7eb;
  transition:.25s;
  text-align:center;
  color:#0f172a;
  cursor:pointer;
}

.card:hover{
  transform:translateY(-6px);
  box-shadow:0 20px 45px rgba(0,0,0,.25);
}

.card.primary{
  border:2px solid #2563eb;
}

/* ================= ICON ================= */
.icon{
  font-size:52px;
  margin-bottom:16px;
}

.gmail{ color:#ea4335; }
.telegram{ color:#229ed9; }
.outlook{ color:#0a66c2; }

.card h3{
  margin:0;
  font-size:18px;
}

.card p{
  margin:12px 0 22px;
  font-size:14px;
  color:#475569;
}

/* ================= BUTTON ================= */
.btn{
  padding:12px 18px;
  border-radius:12px;
  border:none;
  font-weight:600;
  cursor:pointer;
}

.btn.primary{
  background: linear-gradient(135deg,#0b1220,#1f3b57,#7fa6c9);
  color:#fff;
}

.btn.disabled{
  background:#e5e7eb;
  color:#94a3b8;
  cursor:not-allowed;
}
</style>
</head>


<body>

<!-- ================= TOP BAR ================= -->
<div class="top-bar">
  <div class="header">
    <h1>Voice-Based Email & Messaging Assistant</h1>
    <p>Choose a service to continue</p>
  </div>

  <!-- USER MENU -->
  <div class="user-menu">
    <button class="avatar-btn" onclick="toggleMenu()">
      <i class="fi fi-rr-user"></i>
    </button>

    <div class="user-dropdown" id="userDropdown">
      <div class="user-email"
     title="{{ user.gmail.email if user and user.gmail }}">
  {{ user.gmail.email if user and user.gmail else "Gmail not linked" }}
</div>


      <a href="/logout" class="logout-btn">
        <i class="fi fi-rr-exit"></i> Logout
      </a>
    </div>
  </div>
</div>

<!-- ================= GRID ================= -->
<div class="grid">

  <div class="card primary" onclick="location.href='/gmail'">

    <div class="icon gmail"><i class="fi fi-rr-envelope"></i></div>
    <h3>Gmail</h3>
    <p>Access and manage Gmail using voice commands.</p>
    <button class="btn primary">Open Gmail</button>
  </div>

  <div class="card">
    <div class="icon telegram"><i class="fi fi-brands-telegram"></i></div>
    <h3>Telegram</h3>
    <p>Voice-based messaging integration (Coming Soon).</p>
    <button class="btn disabled">Coming Soon</button>
  </div>

  <div class="card">
    <div class="icon outlook"><i class="fi fi-brands-microsoft"></i></div>
    <h3>Outlook</h3>
    <p>Microsoft Outlook integration (Coming Soon).</p>
    <button class="btn disabled">Coming Soon</button>
  </div>

</div>

<script>
function toggleMenu(){
  document.getElementById("userDropdown").classList.toggle("show");
}

document.addEventListener("click", e => {
  if(!e.target.closest(".user-menu")){
    document.getElementById("userDropdown").classList.remove("show");
  }
});

</script>
<div id="voice-activator"
     style="position:fixed; inset:0; z-index:9999; background:transparent;">
</div>

<script src="{{ url_for('static', filename='js/voice_dashboard.js') }}"></script>

</body>
</html>
